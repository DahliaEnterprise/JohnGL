<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trails</title>
  <script type="text/javascript">
		/* SHADER SOURCE CODE */
		var solid_color_vertex_shader_source_code = "";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "attribute vec4 position_of_vertex_to_colorize; \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "attribute vec4 color_of_vertex_to_colorize; \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "varying vec4 varying_color_of_vertex_to_colorize; \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "void main() { \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "  //colorize position.  \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "  gl_Position = position_of_vertex_to_colorize; \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "  varying_color_of_vertex_to_colorize = color_of_vertex_to_colorize;  \n";
        solid_color_vertex_shader_source_code = solid_color_vertex_shader_source_code + "} \n";
     
		var solid_color_fragment_shader_source_code = "";
				solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "precision mediump float;  \n";
        solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "varying vec4 varying_color_of_vertex_to_colorize; \n";
        solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "void main() { \n";
        solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "  //Define filter \n";
        solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "  gl_FragColor = varying_color_of_vertex_to_colorize; \n";
        solid_color_fragment_shader_source_code = solid_color_fragment_shader_source_code + "} \n";
										
		 var list_of_shaders_names = ["solid_color_vertex"];//only useful for turning all on or turning all off(to be clear, freeing memory for scenes that only need a particular aset of shaders to be used).
	   var list_of_shaders_jsonobjects = {
			                                   "solid_color_vertex": {
															                                   "vertex_sourcecode": solid_color_vertex_shader_source_code,
																										             "fragment_sourcecode": solid_color_fragment_shader_source_code,
																										             "program": null,
																										             "program_is_available":false
															                                  }
			                                 };
		
    /* GLOBAL VARIABLES */
      /* Functions as variables */
			/* Format: base identifier, specific purpose or subset identifer, purpose description(most function names may not be this long and or descriptive) */
        /* Startup */
        var begin_startup = null;
        var stage_one = null;
        var stage_two = null;
				
				/* Shader */
				var shader_compile_shader = null;
				var shader_freememory_and_load_relevant_shaders = null;

				/* Draw Screen Loop */
				var drawscreenloop_render_screen = null;
				
				/* Course of actions loop */
			  var course_of_actions_loop = null;
				
				/* User Land Logic */
				var userland_scene_majorscene = null;
				var userland_scene_prestage_to_majorscene = null;
				var userland_scene_microscene_of_majorscene = null;
				var userland_course_of_actions_pulse = null;
				
      /* Synchronous Variables */
      const synchronous_decimal_fraction_precision = 6;
    
      /* Open GL ES */
        /* HTML Elements */
        var canvas_for_opengl = null;

        /* Interface */
        var interface_to_opengles = null;

        /* Inline Shaders */
        var list_of_shaders = {};

        /* List of models */
        var list_of_models = {};

      /* Imperial Measurment */
      var imperial_measurement = {};
    
      /* Coordinated Space */
      var coordinated_space = {};
    
    /* Stage One, Initialize Handles */
    stage_one = function()
    {
      //Initialize canvas handle and interface to opengl handle.
      canvas_for_opengl = document.getElementById("canvas_for_opengl");
      interface_to_opengles = canvas_for_opengl.getContext("webgl2");
   
    }

    /* Stage Two, Define coordinated space, list of shaders and models, User land states */
    stage_two = function()
    {
      /* Define Imperial Measurement */
      imperial_measurement["unit_type"] = "inches";
      
      imperial_measurement["total_hatchmarks_per_one_inch"] = 32;
      imperial_measurement["size_of_space_between_hatchmark"] = 0.031250;
      
      imperial_measurement["diameter_of_one_unitedstates_quarter"] = 0.955000;
      imperial_measurement["length_of_one_mile"] = 63360.000000; //one mile is 5280 feet, 5280 feet muliplied by 12 inches(one foot) is 63360 inches exactly.

      
      /* Coordinated Space Definition */
          /* Length of plane */
          coordinated_space["length_of_x_plane_hatchmarks"] = (imperial_measurement["length_of_one_mile"] * imperial_measurement["total_hatchmarks_per_one_inch"]);
          coordinated_space["length_of_y_plane_hatchmarks"] = (imperial_measurement["length_of_one_mile"] * imperial_measurement["total_hatchmarks_per_one_inch"]);
          coordinated_space["length_of_z_plane_hatchmarks"] = (imperial_measurement["length_of_one_mile"] * imperial_measurement["total_hatchmarks_per_one_inch"]);
      
          /* Center of plane */
          coordinated_space["center_of_x_plane_hatchmarks"] = Math.trunc((coordinated_space["length_of_x_plane_hatchmarks"] / 2));
          coordinated_space["center_of_y_plane_hatchmarks"] = Math.trunc((coordinated_space["length_of_y_plane_hatchmarks"] / 2));
          coordinated_space["center_of_z_plane_hatchmarks"] = Math.trunc((coordinated_space["length_of_z_plane_hatchmarks"] / 2));
					
			/* User Land States */
			userland_scene_majorscene = 1;
			userland_scene_prestage_to_majorscene = 1;
			userland_scene_microscene_of_majorscene = 1;
			
			//test polymorphic compile shader function
			let nowhere = shader_compile_shader(solid_color_vertex_shader_source_code, solid_color_fragment_shader_source_code);
			
    }
		
		/* Shader */
		shader_compile_shader = function(vertex_shader_sourcecode, fragment_shader_sourcecode)
		{
			let output = null;
			
			let vertex_shader_of_program = interface_to_opengles.createShader(interface_to_opengles.VERTEX_SHADER);
          
      interface_to_opengles.shaderSource(vertex_shader_of_program, vertex_shader_sourcecode);
      interface_to_opengles.compileShader(vertex_shader_of_program);

      if(interface_to_opengles.getShaderParameter(vertex_shader_of_program, interface_to_opengles.COMPILE_STATUS) == false)
      {
        console.log("vertex shader failed to compile ()");
      }

      //do compile fragment shader
      let fragment_shader_of_program = interface_to_opengles.createShader(interface_to_opengles.FRAGMENT_SHADER);
          
		  interface_to_opengles.shaderSource(fragment_shader_of_program, fragment_shader_sourcecode );
      interface_to_opengles.compileShader(fragment_shader_of_program);

      if(interface_to_opengles.getShaderParameter(fragment_shader_of_program, interface_to_opengles.COMPILE_STATUS) == false)
      {
       console.log("fragment shader failed to compile (_fragment)");
            
      }
			
			output = vertex_shader_of_program;
			return output;
		}
		
		shader_freememory_and_load_relevant_shaders = function(list_of_shader_names_to_be_available)
		{
			
		}
		
		/* Draw Screen Loop */
	  drawscreenloop_render_screen = function()
		{
			//order of operations here.
		}
		
		/* Course of Actions Loop */
		course_of_actions_loop = function()
		{
			//User Land Logic
			user_land_course_of_actions_pulse();
			
			//render screen
			drawscreenloop_render_screen();
			
			//envoke course of actions loop
			setTimeout(course_of_actions_loop, 1);
		}
		
		/* User Land Logic */
		user_land_course_of_actions_pulse = function()
		{
			/* 
			   Guidelines of
			   Prestage Scene, Major Scene, Minor Scene
				 
			   Every major scene has one successive
				 prestage. Once all prestages have been satisfied
				 then the microscenes will coordinate toggling
				 on or off by switching microscenes based on
				 events of the user or events within the application.
				 Major scenes also switch based on user interactions or events
				 from the application. 
				 
				 Although the prestage, microscene, and majorscene
				 are clearly defined they are so defined as such
				 to cooperate with the shader and model memory management
				 model and is also in line with real world artist workflow
				 with working with groups of flip books or video scenes;
				 That being said, aslong as one does not have logic outside a major
				 scene code block almost any rendering workflow within regards to
				 logic can be accepted with out being disruptive to the
				 operator of the application.
			*/
			if(userland_scene_majorscene == 1)
			{
				if(userland_scene_prestage_to_majorscene == 1)
			  {
					//begin coordinating the compilations of shaders and notifying the operator of the progress(loading bar)
		    }else if(userland_scene_prestage_to_majorscene == 0)
				{
				  if(userland_scene_microscene_of_majorscene == 1)
					{
						//begin first user land interaction or animation here.
					}
				}
			}
		}
		
    /* Begin startup stages */
    begin_startup = function()
    {
			//start up
      stage_one();
      stage_two();
      //end of starting up stages
			
			//begin course of actions loop
			course_of_actions_loop();
    }
		
		
   
  </script>
</head>
<body onLoad="begin_startup()">
  <canvas id="canvas_for_opengl"></canvas>
  <div id="test">test</div>
  <div id="list_of_models" style="display:none;">
    <div id="test_model">
      {
        "coordinates":{
                        "positions":"866304, 1014144,
                                     866304, 1013760,
                                     1013760, 1013760
                                    "
                      }
      }
    </div>
    <div id="alphabet_unitedstates_english_lowercase_a">
      {
        "coordinates":{
                        
                      }
      }
    </div>
  </div>
  </div>                  
  </body>
</html>
